/* areacorners.js
   determine the best place to put a box of dimensions (width,height) given a circle, rect or poly
*/
(function(a){var b=a.mapster.utils;b.areaCorners=function(n,r,h,E,p){var A,o,v,w,t,u,f,d,g,e,k,l,x,s,y=0,z=0,C,D,q,B,c,m,i=[];
n=n.length?n:[n];h=h?a(h):a(document.body);A=h.offset();C=A.left;D=A.top;if(r){A=a(r).offset();
y=A.left;z=A.top;}for(s=0;s<n.length;s++){m=n[s];if(m.nodeName==="AREA"){q=b.split(m.coords,parseInt);
switch(m.shape){case"circle":k=q[0];l=q[1];B=q[2];i=[];for(s=0;s<360;s+=20){c=s*Math.PI/180;
i.push(k+B*Math.cos(c),l+B*Math.sin(c));}break;case"rect":i.push(q[0],q[1],q[2],q[1],q[2],q[3],q[0],q[3]);
break;default:i=i.concat(q);break;}for(s=0;s<i.length;s+=2){i[s]=parseInt(i[s],10)+y;
i[s+1]=parseInt(i[s+1],10)+z;}}else{m=a(m);A=m.position();i.push(A.left,A.top,A.left+m.width(),A.top,A.left+m.width(),A.top+m.height(),A.left,A.top+m.height());
}}v=w=f=g=999999;t=u=d=e=-1;for(s=i.length-2;s>=0;s-=2){k=i[s];l=i[s+1];if(k<v){v=k;
e=l;}if(k>t){t=k;g=l;}if(l<w){w=l;d=k;}if(l>u){u=l;f=k;}}if(E&&p){o=false;a.each([[d-E,w-p],[f,w-p],[v-E,e-p],[v-E,g],[t,e-p],[t,g],[d-E,u],[f,u]],function(F,j){if(!o&&(j[0]>C&&j[1]>D)){x=j;
o=true;return false;}});if(!o){x=[t,u];}}return x;};}(jQuery));